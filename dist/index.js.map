{"version":3,"file":"index.js","sources":["../src/habit-tracker.ts","../src/index.ts"],"sourcesContent":["import '@logseq/libs'\n\n// Declare global logseq for TypeScript\ndeclare const logseq: any\n\n// Constants\nconst HABITS_PAGE_NAME = 'Habits' as const\nconst UI_KEY = 'habit-tracker-main' as const\n\n// Regex patterns\nconst TIMESTAMP_PATTERN = /((?:1[0-2]|0?[1-9]):[0-5][0-9]\\s*(?:[AaPp][Mm])|(?:2[0-3]|[01]?[0-9]):[0-5][0-9])/\n\nexport interface HabitEntry {\n  name: string\n  date: string\n  time?: string\n  page: string\n  blockUuid: string\n}\n\nexport interface HabitStats {\n  name: string\n  totalCount: number\n  entries: HabitEntry[]\n}\n\nexport class HabitTracker {\n  async ensureHabitsPage(): Promise<void> {\n    try {\n      // Check if Habits page exists\n      const page = await logseq.Editor.getPage(HABITS_PAGE_NAME)\n      if (!page) {\n        // Create the Habits page\n        await logseq.Editor.createPage(HABITS_PAGE_NAME, {}, { redirect: false })\n        console.log(`Created ${HABITS_PAGE_NAME} page`)\n      }\n    } catch (error) {\n      console.error('Error ensuring Habits page:', error)\n    }\n  }\n\n  async renderOnHabitsPage(): Promise<void> {\n    try {\n      const page = await logseq.Editor.getPage(HABITS_PAGE_NAME)\n      if (!page) return\n\n      const pageBlocks = await logseq.Editor.getPageBlocksTree(HABITS_PAGE_NAME)\n      \n      // Clear existing content and add the tracker\n      if (!pageBlocks || pageBlocks.length === 0) {\n        await logseq.Editor.appendBlockInPage(HABITS_PAGE_NAME, '')\n      }\n\n      // Render the habit tracker UI\n      const habitData = await this.getHabitData()\n      const html = this.generateHabitTrackerHTML(habitData)\n\n      logseq.provideUI({\n        key: UI_KEY,\n        slot: HABITS_PAGE_NAME,\n        reset: true,\n        template: html,\n      })\n    } catch (error) {\n      console.error('Error rendering on Habits page:', error)\n    }\n  }\n\n  async getHabitData(startDate?: Date, endDate?: Date): Promise<Map<string, HabitStats>> {\n    const allPages = await logseq.Editor.getAllPages()\n    if (!allPages) return new Map()\n\n    const habitMap = new Map<string, HabitEntry[]>()\n    const journalPages = allPages.filter((page: any) => \n      page.journalDay && this.isDateInRange(page.journalDay, startDate, endDate)\n    )\n\n    // Parse each journal page for habits with #habit tag\n    for (const page of journalPages) {\n      const pageBlocks = await logseq.Editor.getPageBlocksTree(page.name)\n      if (!pageBlocks || !page.journalDay) continue\n\n      const date = this.formatJournalDate(page.journalDay)\n      this.extractHabitsFromBlocks(pageBlocks, date, page.name, habitMap)\n    }\n\n    // Calculate statistics for each habit\n    return this.calculateHabitStats(habitMap)\n  }\n\n  private isDateInRange(journalDay: number, startDate?: Date, endDate?: Date): boolean {\n    const date = this.journalDayToDate(journalDay)\n    if (startDate && date < startDate) return false\n    if (endDate && date > endDate) return false\n    return true\n  }\n\n  private journalDayToDate(journalDay: number): Date {\n    const year = Math.floor(journalDay / 10000)\n    const month = Math.floor((journalDay % 10000) / 100) - 1\n    const day = journalDay % 100\n    return new Date(year, month, day)\n  }\n\n  private formatJournalDate(journalDay: number): string {\n    const date = this.journalDayToDate(journalDay)\n    return date.toISOString().split('T')[0]\n  }\n\n  private extractHabitsFromBlocks(\n    blocks: any[],\n    date: string,\n    pageName: string,\n    habitMap: Map<string, HabitEntry[]>\n  ): void {\n    for (const block of blocks) {\n      if (block.content) {\n        // Match #habit tag pattern - capture until timestamp or end of line\n        const habitMatch = block.content.match(/#habit\\s+([^#\\n\\r]*?)(?=\\s+\\d{1,2}:\\d{2}|$)/i)\n        if (habitMatch) {\n          const habitName = habitMatch[1].trim()\n          \n          // Skip empty habit names\n          if (!habitName) continue\n          \n          // Try to extract time from the habit entry with proper validation\n          let time: string | undefined\n          const timeMatch = block.content.match(TIMESTAMP_PATTERN)\n          if (timeMatch) {\n            time = timeMatch[1]\n          }\n          \n          const entry: HabitEntry = {\n            name: habitName,\n            date,\n            time,\n            page: pageName,\n            blockUuid: block.uuid,\n          }\n\n          if (!habitMap.has(habitName)) {\n            habitMap.set(habitName, [])\n          }\n          habitMap.get(habitName)!.push(entry)\n        }\n      }\n\n      // Recursively check child blocks\n      if (block.children && block.children.length > 0) {\n        this.extractHabitsFromBlocks(block.children, date, pageName, habitMap)\n      }\n    }\n  }\n\n  private calculateHabitStats(habitMap: Map<string, HabitEntry[]>): Map<string, HabitStats> {\n    const statsMap = new Map<string, HabitStats>()\n\n    for (const [habitName, entries] of habitMap) {\n      // Sort entries by date and time\n      const sortedEntries = entries.sort((a, b) => {\n        const dateCompare = a.date.localeCompare(b.date)\n        if (dateCompare !== 0) return dateCompare\n        if (a.time && b.time) return a.time.localeCompare(b.time)\n        return 0\n      })\n\n      statsMap.set(habitName, {\n        name: habitName,\n        totalCount: sortedEntries.length,\n        entries: sortedEntries,\n      })\n    }\n\n    return statsMap\n  }\n\n  private generateHabitTrackerHTML(habitData: Map<string, HabitStats>): string {\n    const habits = Array.from(habitData.values()).sort((a, b) => \n      b.totalCount - a.totalCount\n    )\n\n    if (habits.length === 0) {\n      return `\n        <div style=\"padding: 60px 20px; text-align: center; color: #787774; max-width: 600px; margin: 0 auto;\">\n          <div style=\"font-size: 48px; margin-bottom: 16px;\">ðŸ“Š</div>\n          <h3 style=\"margin: 0 0 12px 0; font-size: 18px; color: #37352F; font-weight: 600;\">No habits tracked yet!</h3>\n          <p style=\"margin: 0; font-size: 14px; line-height: 1.6; color: #787774;\">\n            Start tracking habits in your daily journal by using the <code style=\"background: #f7f7f5; padding: 2px 6px; border-radius: 3px; font-size: 13px;\">#habit</code> tag:\n          </p>\n          <div style=\"background: #fafafa; border-radius: 6px; padding: 16px; margin: 20px 0; text-align: left; font-family: monospace; font-size: 13px; border: 1px solid #e3e3e1;\">\n            <div style=\"color: #787774; margin-bottom: 4px;\">- #habit Exercise</div>\n            <div style=\"color: #787774; margin-bottom: 4px;\">- #habit Meditation 7:00 AM</div>\n            <div style=\"color: #787774;\">- #habit Reading</div>\n          </div>\n          <p style=\"margin: 16px 0 0 0; font-size: 13px; color: #9B9A97;\">\n            The timestamp is optional. If provided, it will be shown in the tracker.\n          </p>\n        </div>\n      `\n    }\n\n    const now = new Date()\n    const monthView = this.generateMonthView(habits, now)\n    const yearView = this.generateYearView(habits, now)\n\n    return `\n      <div class=\"habit-tracker-container\" style=\"\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;\n        max-width: 1000px;\n        margin: 0 auto;\n        padding: 32px 24px;\n        background: #fafafa;\n      \">\n        <div class=\"habit-tracker-header\" style=\"\n          margin-bottom: 32px;\n          padding-bottom: 0;\n        \">\n          <h1 style=\"\n            margin: 0 0 4px 0;\n            font-size: 24px;\n            font-weight: 600;\n            color: #000000;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n          \">ðŸ“Š Habit Tracker</h1>\n          <p style=\"\n            margin: 0;\n            color: #787774;\n            font-size: 14px;\n          \">Track your daily habits and build consistency</p>\n        </div>\n\n        <div class=\"controls-bar\" style=\"\n          display: flex;\n          justify-content: flex-start;\n          align-items: center;\n          margin-bottom: 24px;\n        \">\n          <div class=\"habit-tracker-tabs\" style=\"\n            display: flex;\n            gap: 4px;\n          \">\n            <button class=\"tab-button active\" data-tab=\"month\" style=\"\n              padding: 6px 12px;\n              background: #5B57EB;\n              color: white;\n              border: none;\n              border-radius: 4px;\n              font-size: 13px;\n              font-weight: 500;\n              cursor: pointer;\n              transition: all 0.15s;\n            \">Month View</button>\n            <button class=\"tab-button\" data-tab=\"year\" style=\"\n              padding: 6px 12px;\n              background: transparent;\n              color: #787774;\n              border: none;\n              border-radius: 4px;\n              font-size: 13px;\n              font-weight: 500;\n              cursor: pointer;\n              transition: all 0.15s;\n            \">Year View</button>\n          </div>\n        </div>\n\n        <div class=\"tab-content month-view\">\n          ${monthView}\n        </div>\n\n        <div class=\"tab-content year-view\" style=\"display: none;\">\n          ${yearView}\n        </div>\n      </div>\n\n      <style>\n        .habit-tracker-container .tab-button:hover {\n          background: #ededec;\n        }\n        .habit-tracker-container .tab-button.active {\n          background: #5B57EB !important;\n          color: white !important;\n        }\n        .habit-tracker-container .tab-button.active:hover {\n          background: #4c48d9 !important;\n        }\n        .habit-tracker-container input[type=\"checkbox\"] {\n          width: 14px;\n          height: 14px;\n        }\n      </style>\n\n      <script>\n        (function() {\n          const buttons = document.querySelectorAll('.habit-tracker-container .tab-button');\n          \n          // Tab switching\n          buttons.forEach(button => {\n            button.addEventListener('click', function() {\n              const tab = this.getAttribute('data-tab');\n              \n              // Update button states\n              buttons.forEach(b => {\n                b.classList.remove('active');\n                b.style.background = 'transparent';\n                b.style.color = '#787774';\n                b.style.border = 'none';\n              });\n              this.classList.add('active');\n              this.style.background = '#5B57EB';\n              this.style.color = 'white';\n              this.style.border = 'none';\n\n              // Show/hide content\n              const container = this.closest('.habit-tracker-container');\n              container.querySelectorAll('.tab-content').forEach(content => {\n                content.style.display = 'none';\n              });\n              container.querySelector('.' + tab + '-view').style.display = 'block';\n            });\n          });\n        })();\n      </script>\n    `\n  }\n\n  private generateMonthView(habits: HabitStats[], date: Date): string {\n    const year = date.getFullYear()\n    const month = date.getMonth()\n    \n    // Get last day of month to determine number of days\n    const lastDay = new Date(year, month + 1, 0)\n    const daysInMonth = lastDay.getDate()\n    \n    const monthName = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })\n    \n    // Create a map of date strings to habit completion\n    const habitCompletionMap = new Map<string, Map<string, boolean>>()\n    \n    for (const habit of habits) {\n      const dateMap = new Map<string, boolean>()\n      for (const entry of habit.entries) {\n        const entryDate = new Date(entry.date)\n        if (entryDate.getMonth() === month && entryDate.getFullYear() === year) {\n          dateMap.set(entry.date, true)\n        }\n      }\n      habitCompletionMap.set(habit.name, dateMap)\n    }\n    \n    let html = `\n      <div class=\"month-view-container\">\n        <h2 style=\"\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n          color: #000000;\n        \">${monthName}</h2>\n        \n        <div style=\"\n          background: #ffffff;\n          border: 1px solid #e3e3e1;\n          border-radius: 8px;\n          overflow-x: auto;\n          padding: 16px;\n        \">\n          <table style=\"\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 13px;\n          \">\n            <thead>\n              <tr style=\"border-bottom: 2px solid #e3e3e1;\">\n                <th style=\"\n                  padding: 12px 16px;\n                  text-align: left;\n                  font-weight: 600;\n                  color: #000000;\n                  position: sticky;\n                  left: 0;\n                  background: #ffffff;\n                  min-width: 120px;\n                \">Habit</th>\n    `\n    \n    // Add date headers\n    for (let day = 1; day <= daysInMonth; day++) {\n      html += `\n                <th style=\"\n                  padding: 8px 4px;\n                  text-align: center;\n                  font-weight: 500;\n                  color: #787774;\n                  font-size: 12px;\n                  min-width: 32px;\n                \">${day}</th>\n      `\n    }\n    \n    html += `\n                <th style=\"\n                  padding: 12px 16px;\n                  text-align: center;\n                  font-weight: 600;\n                  color: #000000;\n                  min-width: 60px;\n                \">Total</th>\n              </tr>\n            </thead>\n            <tbody>\n    `\n    \n    // Add habit rows\n    for (const habit of habits) {\n      const dateMap = habitCompletionMap.get(habit.name) || new Map()\n      let totalCount = 0\n      \n      html += `\n              <tr style=\"border-bottom: 1px solid #f7f7f5;\">\n                <td style=\"\n                  padding: 12px 16px;\n                  font-weight: 500;\n                  color: #37352F;\n                  position: sticky;\n                  left: 0;\n                  background: #ffffff;\n                \">${this.escapeHtml(habit.name)}</td>\n      `\n      \n      // Add cells for each day\n      for (let day = 1; day <= daysInMonth; day++) {\n        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`\n        const hasHabit = dateMap.has(dateStr)\n        \n        if (hasHabit) totalCount++\n        \n        // Check if this is today\n        const today = new Date()\n        const isToday = today.getDate() === day && \n                       today.getMonth() === month && \n                       today.getFullYear() === year\n        \n        html += `\n                <td style=\"\n                  padding: 8px 4px;\n                  text-align: center;\n                  background: ${isToday ? '#EEF2FF' : 'transparent'};\n                  font-size: 16px;\n                \">${hasHabit ? 'âœ“' : ''}</td>\n        `\n      }\n      \n      html += `\n                <td style=\"\n                  padding: 12px 16px;\n                  text-align: center;\n                  font-weight: 600;\n                  color: #5B57EB;\n                \">${totalCount}</td>\n              </tr>\n      `\n    }\n    \n    html += `\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `\n    \n    return html\n  }\n\n  private generateYearView(habits: HabitStats[], date: Date): string {\n    const year = date.getFullYear()\n    \n    let html = `\n      <div class=\"year-view-container\">\n        <h2 style=\"\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n          color: #000000;\n        \">${year} Statistics</h2>\n        \n        <div style=\"\n          background: #ffffff;\n          border: 1px solid #e3e3e1;\n          border-radius: 8px;\n          overflow: hidden;\n        \">\n          <table style=\"\n            width: 100%;\n            border-collapse: collapse;\n          \">\n            <thead>\n              <tr style=\"background: #fafafa;\">\n                <th style=\"\n                  padding: 12px 20px;\n                  text-align: left;\n                  font-weight: 600;\n                  color: #000000;\n                  font-size: 13px;\n                  border-bottom: 1px solid #e3e3e1;\n                \">Habit</th>\n                <th style=\"\n                  padding: 12px 20px;\n                  text-align: center;\n                  font-weight: 600;\n                  color: #000000;\n                  font-size: 13px;\n                  border-bottom: 1px solid #e3e3e1;\n                \">Total Count</th>\n              </tr>\n            </thead>\n            <tbody>\n    `\n    \n    for (const habit of habits) {\n      html += `\n        <tr style=\"border-bottom: 1px solid #f7f7f5;\">\n          <td style=\"\n            padding: 14px 20px;\n            font-weight: 400;\n            color: #37352F;\n            font-size: 14px;\n          \">${this.escapeHtml(habit.name)}</td>\n          <td style=\"\n            padding: 14px 20px;\n            text-align: center;\n          \">\n            <span style=\"\n              background: #E8E7FF;\n              color: #5B57EB;\n              padding: 4px 12px;\n              border-radius: 4px;\n              font-size: 15px;\n              font-weight: 500;\n              display: inline-block;\n            \">${habit.totalCount}</span>\n          </td>\n        </tr>\n      `\n    }\n    \n    html += `\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `\n    \n    return html\n  }\n\n  private escapeHtml(text: string): string {\n    const map: { [key: string]: string } = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#039;'\n    }\n    return text.replace(/[&<>\"']/g, m => map[m])\n  }\n}\n","import '@logseq/libs'\nimport { HabitTracker } from './habit-tracker'\n\n// Declare global logseq for TypeScript\ndeclare const logseq: any\n\nconst HABITS_PAGE_NAME = 'Habits' as const\n\nasync function main(): Promise<void> {\n  console.log('Habit Tracker plugin loaded')\n\n  const habitTracker = new HabitTracker()\n\n  try {\n    // Create or get the Habits page\n    await habitTracker.ensureHabitsPage()\n\n    // Listen for page navigation to render the tracker\n    logseq.App.onRouteChanged(async ({ path }: { path: string }) => {\n      if (path.includes(HABITS_PAGE_NAME)) {\n        await habitTracker.renderOnHabitsPage()\n      }\n    })\n\n    // Initial render if we're already on the Habits page\n    const currentPage = await logseq.Editor.getCurrentPage()\n    if (currentPage && currentPage.name === HABITS_PAGE_NAME) {\n      await habitTracker.renderOnHabitsPage()\n    }\n\n    console.log(`Habit Tracker plugin ready! Navigate to the \"${HABITS_PAGE_NAME}\" page to view your tracker.`)\n  } catch (error) {\n    console.error('Error initializing Habit Tracker plugin:', error)\n  }\n}\n\nlogseq.ready(main).catch(console.error)\n"],"names":["HABITS_PAGE_NAME","UI_KEY","TIMESTAMP_PATTERN","HabitTracker","error","pageBlocks","habitData","html","startDate","endDate","allPages","habitMap","journalPages","page","date","journalDay","year","month","day","blocks","pageName","block","habitMatch","habitName","time","timeMatch","entry","statsMap","entries","sortedEntries","a","b","dateCompare","habits","now","monthView","yearView","daysInMonth","monthName","habitCompletionMap","habit","dateMap","entryDate","totalCount","dateStr","hasHabit","today","isToday","text","map","m","main","habitTracker","path","currentPage"],"mappings":"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"}